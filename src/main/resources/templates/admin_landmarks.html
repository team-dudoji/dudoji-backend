<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <title layout:title="Landmarks Management">Landmarks Management</title>
    <script th:inline="javascript">
        let baseURL = [[${baseUrl}]];
    </script>
</head>
<body>
<section layout:fragment="content">
<h1>Landmarks Management</h1>
<div>
    <button type="button" onclick="openModal('add')">Add Landmark</button>
</div>
<div>
    <h2>Landmarks List</h2>
    <table>
        <thead>
        <tr>
            <th>landmark id</th>
            <th>PlaceName</th>
            <th>latlng</th>
            <th>Map Image</th>
            <th>Detail Image</th>
            <th>content</th>
            <th>address</th>
            <th>function</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="landmark : ${landmarks}">
            <td th:text="${landmark.landmarkId()}"></td>
            <td th:text="${landmark.placeName()}"></td>
            <td th:text="${landmark.lat} + ', ' + ${landmark.lng}"></td>
            <td><img th:src="@{${landmark.mapImageUrl()}}" style="height:64px"/></td>
            <td><img th:src="@{${landmark.detailImageUrl()}}" style="height:64px"/></td>
            <td th:text="${landmark.content()}"></td>
            <td th:text="${landmark.address()}"></td>
            <td>
                <button type="button" th:onclick="deleteLandmark([[${landmark.landmarkId()}]])">Delete</button>
                <button type="button" th:onclick="openModal('update', [[${landmark}]])">Update</button>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<!-- Modal for Add/Update Product -->
<div id="modal">
    <h4 id="modal-title"></h4>
    <form id="infoForm">
        <label>Place Name:
            <input type="text" name="placeName" required>
        </label><br><br>

        <label>Latitude:
            <input type="number" name="lat" required step="any">
        </label><br><br>

        <label>Longitude:
            <input type="number" name="lng" required step="any">
        </label><br><br>

        <label>Map Image:
            <input type="file" id="modal-mapImageFile" accept="image/*" onchange="previewImage(event, 0)">
        </label><br>
        <input type="hidden" name="mapImageUrl" id="modal-mapImageUrl">
        <img id="modal-mapImagePreview" src="#" alt="Image Preview" style="max-width:100px; max-height:100px; margin-top:10px; border:1px solid #ddd; display:none;"><br><br>
        <input type="hidden" id="modal-existingMapImageUrl">

        <label>Detail Image:
            <input type="file" id="modal-detailImageFile" accept="image/*" onchange="previewImage(event, 1)">
        </label><br>
        <input type="hidden" name="detailImageUrl" id="modal-detailImageUrl">
        <img id="modal-detailImagePreview" src="#" alt="Image Preview" style="max-width:100px; max-height:100px; margin-top:10px; border:1px solid #ddd; display:none;"><br><br>
        <input type="hidden" id="modal-existingDetailImageUrl">

        <label>Content:
            <textarea name="content" rows="3" required></textarea>
        </label><br><br>

        <label>Address:
            <input type="text" name="address" required>
        </label><br><br>

        <button type="submit">제출</button>
        <button type="button" onclick="closeModal()">닫기</button>
    </form>
</div>
    </section>
</body>
<section layout:fragment="underScripts">
    <script src="/admin/js/landmarks-management.js"></script>
</section>

</html>
